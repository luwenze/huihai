<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">

    

    <!--MUI引入-->
    <link rel="stylesheet" href="../lib/mui/css/mui.min.css">
    <!--App自定义的css-->
    <link rel="stylesheet" type="text/css" href="../lib/mui/css/app.css" />
    <link rel="stylesheet" type="text/css" href="../lib/mui/css/mui.picker.min.css" />

    <!-- 再引入自己的less -->
    <link rel="stylesheet/less" href="../css/base.less">
    <link rel="stylesheet/less" href="../css/trainAudit.less">
    <link rel="stylesheet/less" href="../css/trainApply.less">
    <link rel="stylesheet/less" href="../css/trainPlay.less">
    <style>
        h5.mui-content-padded {
            margin-left: 3px;
            margin-top: 20px !important;
        }

        h5.mui-content-padded:first-child {
            margin-top: 12px !important;
        }

        * {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
        }
    </style>


    <!-- 编译less文件的js -->
    <script src="../lib/less/less.js"></script>
</head>

<body>
    <header id="header">
        <a href="#" class="back"><img src="../images/back-font.png" alt=""><span>返回</span></a>
        <h3>培训审核</h3>
    </header>
    <ul class="flow">
        <li>
            <span class="circle checked">1</span>
            <span>提交申请</span>
        </li>
        <li>
            <span class="circle checked">2</span>
            <span>资质审核</span>
        </li>
        <li>
            <span class="circle checked">3</span>
            <span>确定方案</span>
        </li>
        <li>
            <span class="circle checked">4</span>
            <span>培训计划</span>
        </li>
        <li class="last">
            <span class="circle">5</span>
            <span>意见反馈</span>
        </li>
    </ul>
    <div class="main">
        <div class="frame">
            <div class="reminder">
                <span>培训讲师每一场培训（或一个入园培训）生成一张表单</span><br>
            </div>
            <form class="applyForm">
                <div class="submit">
                    <!--老师-->
                    <div class="lr type">
                        <span class="fl">培训讲师：</span>
                        <div class="right">
                            <select>
                                <option value="大会1">程才1</option>
                                <option value="大会2">程才2</option>
                            </select>
                        </div>
                    </div>

                    <!--人数-->
                    <div class="lr fate">
                        <span class="fl">参训人数：</span>
                        <div class="right">
                            <select>
                                <option value="50">50</option>
                                <option value="60">60</option>
                            </select>
                        </div>
                    </div>

                    <!--时间-->
                    <div class="lr date">
                        <span class="fl">培训日期：</span>
                        <div class="right trainTime">
                            <button id='start' data-options='{"type":"date"}' class="btn mui-btn mui-btn-block mybtn">
                                <div id='result0' class="ui-alert myalert">2017年12月12日</div>
                            </button>
                            <span class="line"></span>
                            <button id='demo5' data-options='{"type":"time"}' class="btn mui-btn mui-btn-block mybtn">
                                <div id='result1' class="ui-alert myalert">12:30</div>
                            </button>
                            <button id='demo6' data-options='{"type":"time"}' class="btn mui-btn mui-btn-block mybtn">
                               	<div id='result2' class="ui-alert myalert">1:30</div>
                            </button>
                        </div>
                    </div>

                    <!--类型-->
                    <div class="lr type">
                        <span class="fl">培训类型：</span>
                        <div class="right">
                            <select>
                            <option value="大会1">大会1</option>
                            <option value="大会2">大会2</option>
                        </select>
                        </div>
                    </div>
                    
                    <!--天数-->
                    <div class="lr fate gap">
                        <span class="fl">培训时长：</span>
                        <div class="right" id="interval">
                            
                        </div>
                    </div>
                    
                    <!--区域-->
                    <div class="lr fate area">
                        <span class="fl">培训区域：</span>
                        <div class="right">
                            <select>
                                <option value="50">湖北</option>
                                <option value="60">浙江</option>
                            </select>
                            <span class="sheng">省</span>
                            <select>
                                <option value="50">武汉</option>
                                <option value="60">宜昌</option>
                            </select>
                            <span class="shi">市</span>
                            <select>
                                <option value="50">江汉</option>
                                <option value="60">江夏</option>
                            </select>
                            <span class="qu">区</span>
                        </div>
                    </div>

                    <!--地点-->
                    <div class="lr site">
                        <span class="fl">培训地点：</span>
                        <div class="right">
                            <input type="" name="" value="" placeholder="光谷世界城">
                        </div>
                    </div>

                    <!--科目-->
                    <div class="lr object">
                        <span class="fl">培训科目：</span>
                        <div class="right">
                            <ul class="pitch clearfix" id="delete">
                                <li>
                                    <a href="javascript:void(0)">狮王英语</a>
                                    <em>x</em>
                                </li>
                                <li>
                                    <a href="javascript:void(0)">狮王英语</a>
                                    <em>x</em>
                                </li>
                                <li>
                                    <a href="javascript:void(0)">狮王英语</a>
                                    <em>x</em>
                                </li>
                                <li class="add">
                                    <em id="add">+</em>
                                </li>
                            </ul>

                            <ul class="option clearfix" id="option">
                                <li>
                                    <a href="javascript:void(0)">汇海蒙数</a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)">幼儿英语</a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)">幼儿英语</a>
                                </li>
                                <li>
                                    <a href="javascript:void(0)">幼儿英语</a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    

                    
                    
                    
                    <!--备注-->
                    <div class="lr explain">
                        <span class="fl">备注说明：</span>
                        <div class="right">
                            <textarea rows="" cols="" placeholder="条件符合，同意培训"></textarea>
                        </div>
                    </div>
                    <button type="submit">提交</button>

                </div>

            </form>

        </div>
    </div>











    <!-- 先引入jquery  Bootstrap依赖jquery-->
    <script src="../lib/jquery/jquery.min.js"></script>
    <script src="../js/trainAudit.js"></script>

    <!--时间选择模块-->
    <script src="../lib/mui/js/mui.min.js"></script>
    <script src="../lib/mui/js/mui.picker.min.js"></script>
    <script>
        (function ($) {
            $.init();
            var result0 = $('#result0')[0];
            var result1 = $('#result1')[0];
            var btns = $('.btn');
            btns.each(function (i, btn) {
                btn.addEventListener('tap', function () {
                    var optionsJson = this.getAttribute('data-options') || '{}';
                    var options = JSON.parse(optionsJson);
                    var id = this.getAttribute('id');
                    /*
                     * 首次显示时实例化组件
                     * 示例为了简洁，将 options 放在了按钮的 dom 上
                     * 也可以直接通过代码声明 optinos 用于实例化 DtPicker
                     */

                    var date=0;
                    var picker = new $.DtPicker(options);
                    var time1,time2,gap,s,m,h;

                    picker.show(function (rs) {
                        /*
                         * rs.value 拼合后的 value
                         * rs.text 拼合后的 text
                         * rs.y 年，可以通过 rs.y.vaue 和 rs.y.text 获取值和文本
                         * rs.m 月，用法同年
                         * rs.d 日，用法同年
                         * rs.h 时，用法同年
                         * rs.i 分（minutes 的第二个字母），用法同年
                         */
                        if (id === 'start') {
                            result0.innerText = rs.y.text + '年' + rs.m.text + '月' + rs.d.text +
                                '日';
                            interval();                              
                        } else if(id==='demo5'){
                            result1.innerText = rs.h.text + ':' + rs.i.text;
                            interval();

                        }else if(id==='demo6'){
                            result2.innerText = rs.h.text + ':' + rs.i.text;
                            interval();

                            
                        }
                        /* 
                         * 返回 false 可以阻止选择框的关闭
                         * return false;
                         */
                        /*
                         * 释放组件资源，释放后将将不能再操作组件
                         * 通常情况下，不需要示放组件，new DtPicker(options) 后，可以一直使用。
                         * 当前示例，因为内容较多，如不进行资原释放，在某些设备上会较慢。
                         * 所以每次用完便立即调用 dispose 进行释放，下次用时再创建新实例。
                         */
                        picker.dispose();
                    });

                    function interval(){
                    date=result0.innerText.replace(/[\u4e00-\u9fa5]/g,'/');
                    date=date.substring(0,date.length-1);
                    time1=new Date(date+' '+result1.innerText);
                    time2=new Date(date+' '+result2.innerText);
                    gap=time2.getTime()-time1.getTime();
                    if(gap<0){
                        jQuery('#interval').html('结束时间必须在开始时间之后')
                                            .css('color','#d42121');
                    }else{
                        var s=gap/1000;
                        var m=s/60%60;
                        var h=s/3600;
                        h=Math.floor(h);
                        if(h<1){
                            jQuery('#interval').html(m+'分钟').css('color','#555555');
                        }else{
                            jQuery('#interval').html(h+'小时'+m+'分钟').css('color','#555555');
                        }

                    }
                }

                }, false);
            });


            
        })(mui);
    </script>

    <!--培训科目选择模块-->

</body>

</html>